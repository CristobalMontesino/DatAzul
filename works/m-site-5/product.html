<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>WebTemplate5</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/stylesheet.css">
	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/swiper-bundle.min.css">
	<script type="text/javascript" src="js/jquery-3.5.1.slim.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
</head>

<body>
	<div id="top" class="top-nav-bar">
		<div class="search-box text-center">
			<p>
				<a href="#top">
					WebTemp5
				</a>
			</p>
		</div><!-- search-box -->
		<div class="menu-bar">
			<ul>
				<li>
					<a href="index.html">Home</a>
				</li>
				<li>
					<a href="category.html">Menu</a>
					<ul>
						<li><a href="category.html"> Sub Menu</a></li>
						<li><a href="category.html"> Sub Menu</a></li>
						<li><a href="category.html"> Sub Menu</a></li>
						<li><a href="category.html"> Sub Menu</a></li>
					</ul>
				</li>
				<li>
					<a class="noti no-hover">Cart</a>
				</li>
			</ul>
		</div><!-- menu-bar -->
	</div><!-- top-nav-bar -->
    <div class="shopping-cart no-display">
        <div class="title">
            Shopping Bag
        </div>
        <div>
            <div class="all-cart">
                <ul id="show-cart">

                </ul>
                <p>
                    Total:
                    <span id="total-cart">
                    </span>
                </p>

                <button id="clear-cart">Clear Cart</button>
            </div><!-- all-cart -->
        </div>
    </div><!-- shopping-cart -->
	<section class="product-page">
		<div class="container">
			<div class="row">
				<div class="col-md-5">
					<div id="product-slider" class="carousel slide carousel-fade" data-ride="carousel">
						<div class="carousel-inner">
							<div class="carousel-item active">
							  <img src="img/foto-1.jpg" class="d-block" width="auto" height="500px" alt="foto-1" />
							</div>
							<div class="carousel-item">
							  <img src="img/foto-2.jpg" class="d-block" width="auto" height="500px" alt="foto-2" />
							</div>
							<div class="carousel-item">
							  <img src="img/foto-3.jpg" class="d-block" width="auto" height="500px" alt="foto-3" />
							</div>
							<div class="carousel-item">
							  <img src="img/foto-4.JPG" class="d-block" width="auto" height="500px" alt="foto-4" />
							</div>
								<a class="carousel-control-prev" href="#product-slider" role="button" data-slide="prev">
								  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
								  <span class="sr-only">Previous</span>
								</a>
								<a class="carousel-control-next" href="#product-slider" role="button" data-slide="next">
								  <span class="carousel-control-next-icon" aria-hidden="true"></span>
								  <span class="sr-only">Next</span>
								</a>
						</div><!-- carousel-inner -->
					</div><!-- carousel slide carousel-fade -->
				</div><!-- col-md-5 -->
				<div class="col-md-7">
					<h2 class="data-name">Product Name 1</h2>
					<p class="data-price">$100</p>
					<button class="btn-primary add-to-cart" data-name="ProductName1" data-price="100">Add to Cart</button>
				</div><!-- col-md-7 -->
			</div><!-- row -->
		</div><!-- container -->
	</section><!-- product-page -->
	<section class="product-description">
		<div class="container">
			<h6>Product Description</h6>
			<p>Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here.</p>
			<p>Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here. Write your own words here.</p>
		</div><!-- container -->
	</section><!-- product-description -->
	<footer>
		<div class="container text-center">
			<p>
				<a href="https://datazul.info/">
					back to datazul
				</a>
			</p>
		</div><!-- container text-center -->
	</footer>
</body>
</html>
<script>
//                var swiper = new Swiper('.swiper-container', {
//                    slidesPerView: 1,
//                    spaceBetween: 30,
//                    pagination: {
//                      clickable: true,
//                    },
//                    breakpoints: {
//                      980: {
//                        slidesPerView: 3,
//                        spaceBetween: 10
//                      }
//                    }
//                });
	
				var noti = document.querySelector('.noti');
				var select = document.querySelector(".shopping-cart");
				var button = document.getElementsByClassName("btn-primary");
				for(but of button)
				{
					but.addEventListener('click', (e)=>{
						var add = Number(noti.getAttribute('data-count')|| 0);
						noti.setAttribute('data-count', add + 1);
						noti.classList.add('zero');
					})
				}
				
				$('.noti').click(function() {
					if($('.shopping-cart').hasClass('no-display')){
					   	$('.shopping-cart').removeClass('no-display');
						$('.shopping-cart').addClass('display');
					} else {
						$('.shopping-cart').removeClass('display');
						$('.shopping-cart').addClass('no-display');
					}
				});
				
				$(".add-to-cart").click(function(event){
					event.preventDefault();
					var name = $(this).attr("data-name");
					var price = Number($(this).attr("data-price"));
					
					
					addItemToCart(name,price,1);
					displayCart();
				});
				
				$("#clear-cart").click(function(event){
					clearCart();
					displayCart();
					noti.removeAttribute('data-count');
					noti.classList.remove('zero');
				});
				
				function displayCart(){
					var cartArray = listCart();
					var output = "";
					for(var i in cartArray) {
						output += 
							"<li><button class='delete-item' data-name='"
							+cartArray[i].name+"'>X</button>"
							+cartArray[i].name+" "
							+"Qty:"+cartArray[i].count+" "
							+"$"+cartArray[i].total
							+"</li>";
					}
					
					$("#show-cart").html(output);
					$("#total-cart").html(totalCart());	
				}
				
                $("#show-cart").on("click", ".delete-item",function(event){
					var name = $(this).attr("data-name");
					var subtract = Number(noti.getAttribute('data-count'));
					noti.setAttribute('data-count', subtract - 1);
					removeItemFromCartAll(name);
					displayCart();
					
                });
				
                $("#show-cart").on("click", ".subtract-item",function(event){
					var name = $(this).attr("data-name");
					removeItemFromCart(name);
					displayCart();
                });		
				
                $("#show-cart").on("click", ".plus-item",function(event){
					var name = $(this).attr("data-name");
					addItemToCart(name,0,1);
					displayCart();
                });		
				
// --------------------------------------------------------------------------------- //
				var cart = [];
				
				var Item = function(name, price, count){
					this.name = name
					this.price = price
					this.count = count
				}
				
				
				function addItemToCart(name, price, count){
					for(var i in cart){
						if(cart[i].name === name){
							cart[i].count += count;
							saveCart();
							return;
						}
					}
					var item = new Item(name, price, count);
					cart.push(item);
					saveCart();
				}
				
				
//				addItemToCart("ProductName1", 100.21, 1);
//				addItemToCart("ProductName2", 200.22, 1);
//				addItemToCart("ProductName3", 300.23, 1);
//				addItemToCart("ProductName4", 400.24, 1);
				
				function removeItemFromCart(name){
					for(var i in cart){
						if(cart[i].name === name){
							cart[i].count --;
							if(cart[i].count === 0){
								cart.splice(i, 1);
							}
							break;
						}
					}
					saveCart();
				}
				
				function removeItemFromCartAll(name){
					for(var i in cart){
						if(cart[i].name === name){
							cart.splice(i, 1);
							break;
						}
					}
					saveCart();
				}
				
				function clearCart(){
					cart = [];
					saveCart();
				}
				
				function countCart(){
					var totalCount = 0;
					for(var i in cart){
						totalCount += cart[i].count;
					}
					
					return totalCount;
				}
				
				function totalCart(){
					var totalCost = 0;
					for(var i in cart){
						totalCost += cart[i].price * cart[i].count;
					}
					return totalCost.toFixed(2);
				}
				
				function listCart(){
					var cartCopy = [];
					for(var i in cart){
						var item = cart[i];
						var itemCopy = {};
						for(var p in item){
							itemCopy[p] = item[p];
						}
						itemCopy.total = (item.price * item.count).toFixed(2);
						cartCopy.push(itemCopy);
					}
					return cartCopy;
				}
				
				function saveCart(){
					localStorage.setItem("ShoppingCart", JSON.stringify(cart));
				}
				
				function loadCart(){
					cart = JSON.parse(localStorage.getItem("ShoppingCart"));
				}
				
				loadCart();
				displayCart();
</script>
